name: automated-sales-pipeline-dashboard
prefect-version: 3.4.6  #

build: null

push: null

pull:
  - prefect.deployments.steps.set_variable:
      name: AWS_ACCESS_KEY_ID
      value: "{{ prefect.blocks.secret.credentials.AWS_ACCESS_KEY_ID }}"
  - prefect.deployments.steps.set_variable:
      name: AWS_SECRET_ACCESS_KEY
      value: "{{ prefect.blocks.secret.credentials.AWS_SECRET_ACCESS_KEY }}"
  - prefect.deployments.steps.set_variable:
      name: AWS_DEFAULT_REGION
      value: "{{ prefect.blocks.secret.credentials.AWS_DEFAULT_REGION }}"
  - prefect.deployments.steps.run_shell_script:
      id: download-flow-from-s3
      script: |
        echo "ðŸ“¦ Downloading flow code from S3..."
        aws s3 cp s3://your-bucket-name/flows/etl_flow.zip .
        unzip -o etl_flow.zip

deployments:
- name: etl-deployment
  version: null
  tags: []
  description: Deploys the main ETL pipeline flow
  schedule: {} 
  flow_name: main
  entrypoint: etl_pipeline/etl_flow.py:main
  parameters: {}
  work_pool:
    name: etl-workpool  
    work_queue_name: null  
    job_variables: {}
